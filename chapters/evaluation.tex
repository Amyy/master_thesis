\chapter{Evaluation}
\label{cha:evaluation}
In Chapter~\ref{cha:background}, the two most common quantum secure hash-based signature systems based on binary Merkle Trees are explained: LMS (see Section~\ref{sec:lms}) and XMSS (see Section~\ref{sec:xmss}). In Chapter~\ref{cha:methods}, the concepts \tftree (see Section~\ref{sec:dodis_t5_merkle_tree}) and \extree (see Section~\ref{sec:ext_t5_tree}) are proposed in order to speed up the common binary Merkle Tree and therefore the signature systems LMS and XMSS. 
% ! xmss not so easy possible -> bitmasks!

\section{Performance Comparison}
The general performance of the different tree concepts depending on the leaves $\ell$ is calculated with the formulas in Tables~\ref{table:general_formulas_t5_merkle}. The derivation of each formula is referenced in the column \textit{Source}.

\begin{table}
\centering
\begin{tabular}{l c c c l} 
 \hline\noalign{\smallskip}
 \multicolumn{5}{c}{\textbf{Summary Equations for Performance Calculation}} \\
 \hline\noalign{\smallskip}
 & & \textbf{\tftree} & \textbf{\extree} & \\
 \noalign{\smallskip}
  & \textbf{Merkle Tree} & Aggr. & More Aggr. & \textbf{Source} \\
 \hline\noalign{\smallskip}
 \# hash calls keygen & $\ell-1$ & \multicolumn{2}{c}{$\frac{3}{4}(\ell-1)$} & Eq.~\ref{eq:lms_hashcalls_tree_treegen}, \ref{eq:t5_tree_gen_hashcalls} \\
% \# saved nodes (whole tree) & $2\ell-1$ & \multicolumn{2}{c}{$10\ell-1$} \\ % check if really true
 \# hash calls sign & $\emptyset$ & \multicolumn{2}{c}{$\emptyset$} & \\ % auth.path generation
 \# el. in auth.path & $1.44\log(\ell) $ & $1.86\log(\ell)$ & $1.74\log(\ell)$ & Eq. \ref{eq:lms_authpath_el}, \ref{eq:t5_el_authpath}, \ref{eq:ext_t5_len_authpath} \\
 \# hash calls verify & $1.44\log(\ell)$ & $1.24\log(\ell)$ & $1.12\log(\ell)$ & Eq. \ref{eq:lms_hashcalls_verify}, \ref{eq:t5_path_calc_hashcalls}, \ref{eq:ext_t5_hashcalls_verify} \\  % path calculation
 \hline
\end{tabular}
\caption{Performance of the the standard Merkle Tree (used in LMS) and \extree with the opening variants Aggressive Opening (Aggr.) and More Aggressive Opening (More Aggr.), see Sections~\ref{sec:more_aggr_opening} and \ref{sec:aggr_opening} respectively. The variable $\ell$ denotes the amount of leaves.}
\label{table:general_formulas_t5_merkle}
\end{table}

\subsection{NIST Parameter Set}
There exist standardized sets of values that are used for the proposed signature systems. One common example is the LMS SHA-256 parameter set proposed by the National Institute of Standards and Technology (NIST)~\cite{stateful_hashbased_sign_schemes_NIST_2020}: It is denoted in Table~\ref{table:nist_param_lms}. 
% maybe also add the one for xmss
Notably, the values given in the LMS parameter set refer to the height $d$ of the Merkle Tree. However, the height $d$ of the \tftree and \extree is not directly comparable to the height $d$ of the Merkle Tree, because the same $d$ does \textit{not} result in the same amount of leaves. When used as digital signature scheme, the leaves of the tree correspond to the amount of one-time keys. Therefore, comparing the performance of the standard Merkle Tree, \tftree and \extree based on the amount of leaves $\ell$ is the best evaluation concept. 
The leaves $\ell$ are derived from $d$ in the LMS parameter set, but for a binary Merkle Tree.

% power of 2 table -> lower/upper bound for power of 5 children

\begin{table}
\centering
\begin{tabular}{l c c l} 
 \hline\noalign{\smallskip}
 \multicolumn{4}{c}{\textbf{LMS Parameter Sets: NIST}} \\
 Parameter Set Name & Numeric Identifier & $n$ & $d$\\
 \hline\noalign{\smallskip}
 LMS\_SHA256\_M32\_H5 & 0x00000005  & 32 & 5 \\
 LMS\_SHA256\_M32\_H10 & 0x00000006  & 32 & 10 \\
 LMS\_SHA256\_M32\_H15 & 0x00000007  & 32 & 15 \\
 LMS\_SHA256\_M32\_H20 & 0x00000008  & 32 & 20 \\
 LMS\_SHA256\_M32\_H35 & 0x00000009  & 32 & 25 \\
 \hline\noalign{\smallskip}
 \end{tabular}
\caption{NIST SHA-256 parameter sets for LMS.~\cite{stateful_hashbased_sign_schemes_NIST_2020}. The variable $n$ denotes the number of bytes associated with each node in the (standard binary) Merkle tree, the parameter $d$ denotes the height of the Merkle Tree.}
\label{table:nist_param_lms}
\end{table}

\begin{table}
\centering
\begin{tabular}{c l l c c} 
 \hline\noalign{\smallskip}
 \multicolumn{5}{c}{\textbf{Leaves $\ell$: NIST Parameter Set}} \\
 \noalign{\smallskip} 
 & Merkle Tree & \extree & lower bound & upper bound \\
 $d$ & $\ell = 2^d$ & $\ell = 5^d$ & $\ell = 2^{\floor{\log_2(5^d)}}$ & $\ell = 2^{\ceil{\log_2(5^d)}}$ \\
  \hline\noalign{\smallskip}
 5 & $2^5 = 32$ & $5^5 = 3125$ & $2^{11}$ & $2^{12}$\\
 10 & $2^{10} = 1024$ & $5^{10} = 9765625$ & $2^{23}$ & $2^{24}$\\
 15 & $2^{15} = 32768$ & $5^{15} = 30517578125$ & $2^{34}$ & $2^{35}$\\ % 5^{15} 
 20 & $2^{20} = 1048576$ & $5^{20} = 95367431640625$ & $2^{46}$ & $2^{47}$\\ % 5^20 
 25 & $2^{25} = 33554432$ & $5^{25} = 298023223876953125$ & $2^{58}$ & $2^{59}$ \\ 
 \hline\noalign{\smallskip}
 \end{tabular}
\caption{Tree height $d$ out of NIST SHA-256 parameter sets for LMS (see Table~\ref{table:nist_param_lms} converted to amount of leaves $\ell$ for for Merkle Tree, \extree. Lower bound denotes the closest power of 2 lesser than $5^d$. Upper bound denotes the closest power of 2 greater than $5^d$.} % insert reference to LMS section here
\label{table:nist_param_comparison}
\end{table}

% \section{Discussion}

% \section{Future Work}
% idea for xmss, not only calculating the speedup but also concept
% concept for T5 tree when not every leaf is "filled"